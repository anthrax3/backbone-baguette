!function(a,b){"function"==typeof define&&define.amd?define(b):(_.isUndefined(a.Backbone.Baguette)&&(a.Backbone.Baguette={}),a.Backbone.Baguette.Utils=b())}(this,function(){var a=["noBind","tpl","modelView","templating","nestedViews","loaderView","loader"];return{optionsToObject:function(b){_.each(a,function(a){_.isUndefined(b.options[a])||(b[a]=b.options[a])})},removeDomOptions:function(a){delete a.el,delete a.tagName,delete a.tagName,delete a.id,delete a.className,delete a.attributes}}}),function(a,b){"function"==typeof define&&define.amd?define(["Backbone"],b):(_.isUndefined(a.Backbone.Baguette)&&(a.Backbone.Baguette={}),a.Backbone.Baguette.Loader=b(a.Backbone))}(this,function(a){var b=a.View.extend({className:"loader"});return b}),function(a,b){"function"==typeof define&&define.amd?define(b):(_.isUndefined(a.Backbone.Baguette)&&(a.Backbone.Baguette={}),a.Backbone.Baguette.Templating=b())}(this,function(){var a=function(a,b){return Handlebars.compile(a)(b)};return a}),function(a,b){if("function"==typeof define&&define.amd)define(["Backbone","./Utils","./Loader"],b);else{if(_.isUndefined(a.Backbone.Baguette)||_.isUndefined(a.Backbone.Baguette.Utils))throw new Error("Backbone & Baguette.Utils required!");a.Backbone.Baguette.LoadableView=b(a.Backbone,a.Backbone.Baguette.Utils,a.Backbone.Baguette.Loader)}}(this,function(a,b,c){var d=a.View.extend({loader:!1,initialize:function(){if(b.optionsToObject(this),this.loader){var a;a=_.isUndefined(this.loaderView)?c:this.loaderView,_.isUndefined(this.model)?_.isUndefined(this.collection)||(instOpts={collection:this.collection,ref:this.collection}):instOpts={model:this.model,ref:this.model},this.loaderViewInstance=new a(instOpts),this.listenTo(instOpts.ref,"request",this.renderLoader)}},renderLoader:function(){this.clean(),this.$el.html(this.loaderViewInstance.render().$el)}});return d}),function(a,b){if("function"==typeof define&&define.amd)define(["./Templating","./LoadableView"],b);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.LoadableView))throw new Error("Backbone & Backbone.Baguette.LoadableView needed");a.Backbone.Baguette.ModelView=b(a.Backbone.Baguette.Templating,a.Backbone.Baguette.LoadableView)}}(this,function(a,b){var c=b.extend({tpl:"",noBind:!1,templating:a,initialize:function(a){c.__super__.initialize.call(this,a),this.noModel=!1,_.isUndefined(this.model)&&(this.noModel=!0),this.noBind||this.noModel||this.listenTo(this.model,"change",this.render)},render:function(){return this.noModel?this.$el.html(this.tpl):_.isUndefined(this.compiledTemplate)?this.$el.html(this.templating(this.tpl,this.model.toJSON())):this.$el.html(this.compiledTemplate(this.model.toJSON())),this},clean:function(){return this.$el.empty(),this}});return c}),function(a,b){if("function"==typeof define&&define.amd)define(["./Utils","./LoadableView","./ModelView","Backbone"],b);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.LoadableView)||_.isUndefined(Backbone.Baguette.Utils))throw new Error("Backbone & Backbone.Baguette.LoadableView && Backbone.Baguette.Utils needed");a.Backbone.Baguette.CollectionView=b(a.Backbone.Baguette.Utils,a.Backbone.Baguette.LoadableView,a.Backbone.Baguette.ModelView,Backbone)}}(this,function(a,b,c){var d="reset remove",e=b.extend({noBind:!1,modelView:c,_views:[],initialize:function(b){if(e.__super__.initialize.call(this,b),this._views=[],_.isUndefined(this.collection))throw new Error("CollectionView needs a collection!");if(!this.noBind){var c=d;this.options.add?this.listenTo(this.collection,"add",this.addElement):c+=" add",this.listenTo(this.collection,c,this.render)}var f=_.clone(this.options);a.removeDomOptions(f),delete f.collection,this._baseChildOptions=f},addElement:function(a){var b=_.clone(this._baseChildOptions),d=this.modelView;_.isPlainObject(this.modelView)&&(d=c,_.extend(b,this.modelView)),_.extend(b,{model:a}),_.isFunction(this.modelView)&&_.isEmpty(this.modelView.prototype)&&(d=this.modelView.call(this,a));var e=new d(b);return this.$el.append(e.render().$el),this._views.push(e),this},render:function(){var a=this;return this.clean(),this.collection.each(function(b){a.addElement.call(a,b)}),this},clean:function(){return _.each(this._views,function(a){a.remove()}),this.$el.empty(),this._views=[],this}});return e}),function(a,b){if("function"==typeof define&&define.amd)define(["./Utils","./ModelView"],b);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.ModelView)||_.isUndefined(Backbone.Baguette.Utils))throw new Error("Backbone & Backbone.Baguette.ModelView && Backbone.Baguette.Utils needed");a.Backbone.Baguette.CompositeView=b(a.Backbone.Baguette.Utils,a.Backbone.Baguette.ModelView)}}(this,function(a,b){var c=b.extend({_views:[],nestedViews:{},initialize:function(a){c.__super__.initialize.call(this,a),this._views=[]},renderNestedViews:function(){var b=this,c=_.clone(this.options);return a.removeDomOptions(c),_.each(this.nestedViews,function(a,d){c.collection=b.options.collection,c.model=b.options.model;var e=!0,f=!0,g=b.$el.find(d);if(0===g.length)throw new Error("Your selector "+d+" didn't match anything!");if(_.isPlainObject(a)){if(_.isUndefined(a.view))throw new Error('Object for selector must contains a "view" attribute boy!');_.isUndefined(a.render)||(f=a.render);var h=a;a=a.view,_.isUndefined(h.setElement)||(e=h.setElement),_.isUndefined(h.modelAttribute)?_.isUndefined(h.collectionAttribute)||(delete c.model,_.extend(c,{collection:b.model.get(h.collectionAttribute)})):(delete c.collection,_.extend(c,{model:b.model.get(h.modelAttribute)}))}_.isUndefined(a.prototype.modelView)||delete c.model;var i=new a(c);e?i.setElement(g):i.$el.appendTo(g),f&&i.render(),b._views.push(i)}),this},render:function(){return this.clean(),c.__super__.render.call(this),this.renderNestedViews(),this},clean:function(){return c.__super__.clean.call(this),_.each(this._views,function(a){a.remove()}),this._views=[],this}});return c});