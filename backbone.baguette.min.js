(function(e,t){typeof define=="function"&&define.amd?define(t):(_.isUndefined(e.Backbone.Baguette)&&(e.Backbone.Baguette={}),e.Backbone.Baguette.Utils=t())})(this,function(){var e=["noBind","tpl","modelView","templating","nestedViews","loaderView","loader"];return{optionsToObject:function(t){_.each(e,function(e){_.isUndefined(t.options[e])||(t[e]=t.options[e])})},removeDomOptions:function(e){delete e.el,delete e.tagName,delete e.tagName,delete e.id,delete e.className,delete e.attributes}}}),function(e,t){typeof define=="function"&&define.amd?define(t):(_.isUndefined(e.Backbone.Baguette)&&(e.Backbone.Baguette={}),e.Backbone.Baguette.Loader=t(e.Backbone))}(this,function(e){var t=e.View.extend({className:"loader"});return t}),function(e,t){typeof define=="function"&&define.amd?define(t):(_.isUndefined(e.Backbone.Baguette)&&(e.Backbone.Baguette={}),e.Backbone.Baguette.Templating=t())}(this,function(){var e=function(e,t){return Handlebars.compile(e)(t)};return e}),function(e,t){if(typeof define=="function"&&define.amd)define(["./Utils","./Loader"],t);else{if(_.isUndefined(e.Backbone.Baguette)||_.isUndefined(e.Backbone.Baguette.Utils))throw new Error("Backbone & Baguette.Utils required!");e.Backbone.Baguette.LoadableView=t(e.Backbone.Baguette.Utils,e.Backbone.Baguette.Loader)}}(this,function(e,t){var n=Backbone.View.extend({loader:!1,initialize:function(n){e.optionsToObject(this);if(this.loader){var r;_.isUndefined(this.loaderView)?r=t:r=this.loaderView,_.isUndefined(this.model)?_.isUndefined(this.collection)||(instOpts={collection:this.collection,ref:this.collection}):instOpts={model:this.model,ref:this.model},this.loaderViewInstance=new r(instOpts),this.listenTo(instOpts.ref,"request",this.renderLoader)}},renderLoader:function(){this.clean(),this.$el.html(this.loaderViewInstance.render().$el)}});return n}),function(e,t){if(typeof define=="function"&&define.amd)define(["./Templating","./LoadableView"],t);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.LoadableView))throw new Error("Backbone & Backbone.Baguette.LoadableView needed");e.Backbone.Baguette.ModelView=t(e.Backbone.Baguette.LoadableView)}}(this,function(e){var t=e.extend({tpl:"",noBind:!1,templating:Backbone.Baguette.Templating,initialize:function(e){t.__super__.initialize.call(this,e),this.noModel=!1,_.isUndefined(this.model)&&(this.noModel=!0),!this.noBind&&!this.noModel&&this.listenTo(this.model,"change",this.render)},render:function(){return this.noModel?this.$el.html(this.tpl):_.isUndefined(this.compiledTemplate)?this.$el.html(this.templating(this.tpl,this.model.toJSON())):this.$el.html(this.compiledTemplate(this.model.toJSON())),this},clean:function(){return this.$el.empty(),this}});return t}),function(e,t){if(typeof define=="function"&&define.amd)define(["./Utils","./LoadableView"],t);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.LoadableView)||_.isUndefined(Backbone.Baguette.Utils))throw new Error("Backbone & Backbone.Baguette.LoadableView && Backbone.Baguette.Utils needed");e.Backbone.Baguette.CollectionView=t(e.Backbone.Baguette.Utils,e.Backbone.Baguette.LoadableView)}}(this,function(e,t){var n=t.extend({noBind:!1,modelView:Backbone.Baguette.ModelView,_views:[],initialize:function(e){n.__super__.initialize.call(this,e),this._views=[];if(_.isUndefined(this.collection))throw new Error("CollectionView needs a collection!");this.noBind||this.listenTo(this.collection,"add reset remove",this.render)},render:function(){var t=this;this.clean();var n=_.clone(this.options);e.removeDomOptions(n),delete n.collection;var r=this.modelView;return _.isPlainObject(this.modelView)?(r=Backbone.Baguette.ModelView,_.extend(n,this.modelView)):r=this.modelView,this.collection.each(function(e){_.extend(n,{model:e});var i=new r(n);t.$el.append(i.render().$el),t._views.push(i)}),this},clean:function(){return _.each(this._views,function(e){e.remove()}),this.$el.empty(),this._views=[],this}});return n}),function(e,t){if(typeof define=="function"&&define.amd)define(["./Utils","./ModelView"],t);else{if(_.isUndefined(Backbone.Baguette)||_.isUndefined(Backbone.Baguette.ModelView)||_.isUndefined(Backbone.Baguette.Utils))throw new Error("Backbone & Backbone.Baguette.ModelView && Backbone.Baguette.Utils needed");e.Backbone.Baguette.CompositeView=t(e.Backbone.Baguette.Utils,e.Backbone.Baguette.ModelView)}}(this,function(e,t){var n=t.extend({_views:[],nestedViews:{},initialize:function(e){n.__super__.initialize.call(this,e),this._views=[]},renderNestedViews:function(){var t=this,n=_.clone(this.options);return e.removeDomOptions(n),_.each(this.nestedViews,function(e,r){n.collection=t.options.collection,n.model=t.options.model;var i=!0,s=!0,o=t.$el.find(r);if(o.length===0)throw new Error("Your selector "+r+" didn't match anything!");if(_.isPlainObject(e)){if(_.isUndefined(e.view))throw new Error('Object for selector must contains a "view" attribute boy!');_.isUndefined(e.render)||(s=e.render);var u=e;e=e.view,_.isUndefined(u.setElement)||(i=u.setElement),_.isUndefined(u.modelAttribute)?_.isUndefined(u.collectionAttribute)||(delete n.model,_.extend(n,{collection:t.model.get(u.collectionAttribute)})):(delete n.collection,_.extend(n,{model:t.model.get(u.modelAttribute)}))}_.isUndefined(e.prototype.modelView)||delete n.model;var a=new e(n);i?a.setElement(o):a.$el.appendTo(o),s&&a.render(),t._views.push(a)}),this},render:function(){return this.clean(),n.__super__.render.call(this),this.renderNestedViews(),this},clean:function(){return n.__super__.clean.call(this),_.each(this._views,function(e){e.remove()}),this._views=[],this}});return n});