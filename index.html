<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <link rel="stylesheet" href="stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Backbone-baguette by spacenick</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/spacenick/backbone-baguette">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Backbone-baguette</h1>
            <h2>Freshly toasted backbone library. Provides tools and helpers for a super quick backbone development in smalls to mediums applications.</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/spacenick/backbone-baguette/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/spacenick/backbone-baguette/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>Backbone Baguette</h1>

<p>Nothing better than concrete examples to understand how you can baguettize your Backbone development.</p>

<h6>Examples data</h6>

<p>All the following examples will use the following models and collection : </p>

<div class="highlight"><pre>
<span class="c1">// Basic models and collection</span>
<span class="kd">var</span> <span class="nx">Car</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span>
<span class="kd">var</span> <span class="nx">toyota</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">({</span><span class="nx">brand</span><span class="o">:</span><span class="s2">"Toyota"</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s2">"Yaris"</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">bmw</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">({</span><span class="nx">brand</span><span class="o">:</span><span class="s2">"BMW"</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="s2">"M3"</span><span class="p">});</span>

<span class="kd">var</span> <span class="nx">Garage</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span>
<span class="kd">var</span> <span class="nx">myGarage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Garage</span><span class="p">([</span><span class="nx">toyota</span><span class="p">,</span><span class="nx">bmw</span><span class="p">]);</span>
</pre></div>

<h6>Render a Model View</h6>

<p>When we're writing in Backbone, we quickly notice that we're writing a lot of similar views which are actually just using a template engine (such as Mustache or Handlebars) to render a JSON converted model. Instead of re-writing all the time the <em>template(this.model.toJSON())..</em> code you can baguettize it to achieve this.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">ModelView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tpl</span><span class="o">:</span><span class="s2">"My car is a {{brand}} {{name}}"</span><span class="p">,</span>
  <span class="nx">tagName</span><span class="o">:</span><span class="s2">"div"</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ModelView</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">toyota</span><span class="p">});</span>

<span class="nx">myView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">$el</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'body'</span><span class="p">);</span> <span class="c1">// Appends to the body "My car is a Toyota Yaris"</span>
</pre></div>

<p>Here we are using a "classic" Mustache-style template; but the default template engine used in Baguette is Handlebars. </p>

<p>If you wish to change this, you have to edit the global configuration of Baguette and change the templating function, which takes a string template and a JSON object and return the templated string. </p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">TemplatingFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tpl</span><span class="p">,</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">tpl</span><span class="p">)(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">templating</span> <span class="o">=</span> <span class="nx">TemplatingFunction</span><span class="p">;</span>
</pre></div>

<p>You can also specify individually the templating property on each CompositeView, if you want to only edit some views and not the global Baguette templating function.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">ModelView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tpl</span><span class="o">:</span><span class="s2">"My car is a {{brand}} {{name}}"</span><span class="p">,</span>
  <span class="nx">templating</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">tpl</span><span class="p">,</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="nx">MyCustomTemplateEngine</span><span class="p">(</span><span class="nx">tpl</span><span class="p">).</span><span class="nx">CustomRenderMethod</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">tagName</span><span class="o">:</span><span class="s2">"div"</span>
<span class="p">});</span>
</pre></div>

<p>Since I am a fanatic of <a href="http://requirejs.org/">RequireJS</a>, tpl attribute is for now only supporting a raw string because I'm using the awesome <a href="https://github.com/requirejs/text">text plugin</a> to load asynchronosouly my .tpl files. Support for a jQuery selector to fetch a script text/template will be added soon!</p>

<h6>Rendering a collection</h6>

<p>You can use a Composite View to <strong>render a collection</strong> and avoid to write the redundant <em>this.collection.each(....)</em> code.</p>

<p>To achieve this you can define the <strong>modelView</strong> parameter which is either a Backbone.View (or a Baguette CompositeView obviously) definition (not an instance!) or either a parameter object which can contain the traditional Backbone Views parameters to create an el, such as <strong>tagName</strong>, <strong>className</strong>, etc...</p>

<p><em>If you use the second option, Baguette will create "anonymous" views inside the render function for you. Therefore you won't be able to define custom attributes on theses views, are they will be originals Baguette CompositeView objects.</em></p>

<p><strong>Creating a Collection View using a parameter object</strong></p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">GarageView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tagName</span><span class="o">:</span><span class="s2">"ul"</span><span class="p">,</span>
  <span class="nx">tpl</span><span class="o">:</span><span class="s2">"I have a {{brand}} {{name}} in my garage"</span><span class="p">,</span>

  <span class="nx">modelView</span><span class="o">:</span><span class="p">{</span>
   <span class="nx">tagName</span><span class="o">:</span><span class="s2">"li"</span>
  <span class="p">}</span>  

<span class="p">});</span>

<span class="kd">var</span> <span class="nx">myGarageView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GarageView</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="nx">myGarage</span><span class="p">});</span>
<span class="c1">// Render the view =&gt; all the subsequent model views are created!</span>
<span class="nx">myGarageView</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
</pre></div>

<p><strong>Creating a Collection View using a View definition</strong></p>

<p>This will achieve the same thing as above, but I can create a custom view to define events and so. This is the recommended approach when Views are more complex. If your views are only used to "display" data, the above option may be preffered.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">CarView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
   <span class="nx">tpl</span><span class="o">:</span><span class="s2">"I have a {{brand}} {{name}} in my garage"</span><span class="p">,</span>
   <span class="nx">events</span><span class="o">:</span><span class="p">{</span>
     <span class="s2">"click"</span><span class="o">:</span><span class="s2">"onClick"</span>
   <span class="p">},</span>
   <span class="nx">onClick</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">());</span>
   <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">GarageView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tagName</span><span class="o">:</span><span class="s2">"ul"</span><span class="p">,</span>
  <span class="nx">tpl</span><span class="o">:</span><span class="s2">"I have a {{brand}} {{name}} in my garage"</span><span class="p">,</span>
  <span class="nx">modelView</span><span class="o">:</span><span class="nx">CarView</span>

<span class="p">});</span>
<span class="kd">var</span> <span class="nx">myGarageView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GarageView</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="nx">myGarage</span><span class="p">});</span>
<span class="c1">// Render the view =&gt; all the subsequent model views are created!</span>
<span class="nx">myGarageView</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
</pre></div>

<p><em>Your model views are passed all the options you gave to your GarageView instance; except the options related to the DOM such as tagName, etc...</em></p>

<p>The baguette's components are availables under the <strong>Backbone.Baguette</strong> namespace;</p>

<h1>CompositeView</h1>

<p>A CompositeView is a view that is a kind of hybrid view able to render a collection or a model following a <strong>template</strong> with a very few number of arguments. It avoids the redundant templating and collection looping code and allows us to write less code.</p>

<p>Just like Backbone Views, you can (and you must!) inherit from a CompositeView to be able to use all its power.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyViewClass</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Baguette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
   <span class="c1">// properties goes here</span>
<span class="p">});</span>

<span class="c1">// Classic instantiation of the view</span>
<span class="kd">var</span> <span class="nx">myView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyViewClass</span><span class="p">();</span>

</pre></div>

<h1>Global Configuration</h1>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/spacenick">spacenick</a> can be found on <a href="https://github.com/spacenick/backbone-baguette">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
